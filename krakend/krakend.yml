# Flexible Configuration
# https://www.krakend.io/docs/configuration/flexible-config/

{
    "$schema": "https://www.krakend.io/schema/v3.json",
    "version": 3,
    "name": "movies-api-gateway",
    "port": 80,
    "endpoints": [
        
            {
            "endpoint": "/docs",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "GET",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/docs",
                "host": [
                    "http://api:3000"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/docs/{file}",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "GET",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/docs/{file}",
                "host": [
                    "http://api:3000"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/favicon.ico",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "GET",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/favicon.ico",
                "host": [
                    "http://api:3000"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/api/service-docs/{name}",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "GET",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/api/service-docs/{name}",
                "host": [
                    "http://api:3000"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/session/login",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "POST",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/session/login",
                "host": [
                    "http://auth:3001"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/session/accessToken",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "POST",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/session/accessToken",
                "host": [
                    "http://auth:3001"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/session/logout",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "POST",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/session/logout",
                "host": [
                    "http://auth:3001"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/session/logoutAll",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "POST",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/session/logoutAll",
                "host": [
                    "http://auth:3001"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/profile",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "POST",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/profile",
                "host": [
                    "http://profile:3002"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/movies",
            "input_query_strings": ["genre_id","country_id","min_rating","min_votes"],
            "output_encoding": "no-op",
            "method": "GET",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/movies",
                "host": [
                    "http://movie:3003"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/genres",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "GET",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/genres",
                "host": [
                    "http://movie:3003"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/genres/{id}",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "PUT",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/genres/{id}",
                "host": [
                    "http://movie:3003"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
            {
            "endpoint": "/countries",
            "input_query_strings": null,
            "output_encoding": "no-op",
            "method": "GET",
            "input_headers": ["Authorization", "Content-Type"],
            "backend": [{
                "encoding": "no-op",
                "url_pattern": "/countries",
                "host": [
                    "http://movie:3003"
                ],
                "extra_config": {
                    
                }
            }]
            },
        
    ]
}
